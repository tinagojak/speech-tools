<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Edinburgh Speech Tools: Pitch/F0 Detection Algorithm functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="est.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Edinburgh Speech Tools
   &#160;<span id="projectnumber">2.1-release</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__PitchF0DetectionAlgorithmfunctions.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Pitch/F0 Detection Algorithm functions<div class="ingroups"><a class="el" href="group__FunctionsForGeneratingTracks.html">Functions for generating Tracks</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Pitch/F0 Detection Algorithm functions:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__PitchF0DetectionAlgorithmfunctions.png" border="0" alt="" usemap="#group____PitchF0DetectionAlgorithmfunctions"/>
<map name="group____PitchF0DetectionAlgorithmfunctions" id="group____PitchF0DetectionAlgorithmfunctions">
<area shape="rect" id="node1" href="group__FunctionsForGeneratingTracks.html" title="Functions for generating\l Tracks" alt="" coords="5,5,168,47"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga09d90eaccdf4ea1688ec173852bd94c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PitchF0DetectionAlgorithmfunctions.html#ga09d90eaccdf4ea1688ec173852bd94c0">pda</a> (<a class="el" href="classEST__Wave.html">EST_Wave</a> &amp;sig, <a class="el" href="classEST__Track.html">EST_Track</a> &amp;fz, <a class="el" href="classEST__Features.html">EST_Features</a> &amp;op, <a class="el" href="classEST__String.html">EST_String</a> method=&quot;&quot;)</td></tr>
<tr class="separator:ga09d90eaccdf4ea1688ec173852bd94c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9dbade8d205070c12e0a9c0c719b7af0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PitchF0DetectionAlgorithmfunctions.html#ga9dbade8d205070c12e0a9c0c719b7af0">icda</a> (<a class="el" href="classEST__Wave.html">EST_Wave</a> &amp;sig, <a class="el" href="classEST__Track.html">EST_Track</a> &amp;fz, <a class="el" href="classEST__Track.html">EST_Track</a> &amp;speech, <a class="el" href="classEST__Option.html">EST_Option</a> &amp;op, <a class="el" href="classEST__String.html">EST_String</a> method=&quot;&quot;)</td></tr>
<tr class="separator:ga9dbade8d205070c12e0a9c0c719b7af0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga70878a81305fc83535cd9723bcf0d4df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PitchF0DetectionAlgorithmfunctions.html#ga70878a81305fc83535cd9723bcf0d4df">default_pda_options</a> (<a class="el" href="classEST__Features.html">EST_Features</a> &amp;al)</td></tr>
<tr class="separator:ga70878a81305fc83535cd9723bcf0d4df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga66c4c8c7d43c2d9c822dbacf8eb957b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PitchF0DetectionAlgorithmfunctions.html#ga66c4c8c7d43c2d9c822dbacf8eb957b0">srpd</a> (<a class="el" href="classEST__Wave.html">EST_Wave</a> &amp;sig, <a class="el" href="classEST__Track.html">EST_Track</a> &amp;fz, <a class="el" href="classEST__Features.html">EST_Features</a> &amp;options)</td></tr>
<tr class="separator:ga66c4c8c7d43c2d9c822dbacf8eb957b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6d5b37b148ee88d35322a56fe7d3b27a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PitchF0DetectionAlgorithmfunctions.html#ga6d5b37b148ee88d35322a56fe7d3b27a">smooth_phrase</a> (<a class="el" href="classEST__Track.html">EST_Track</a> &amp;c, <a class="el" href="classEST__Track.html">EST_Track</a> &amp;speech, <a class="el" href="classEST__Features.html">EST_Features</a> &amp;options, <a class="el" href="classEST__Track.html">EST_Track</a> &amp;sm)</td></tr>
<tr class="separator:ga6d5b37b148ee88d35322a56fe7d3b27a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf14e802be136f18ab414dccd01d0fb43"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PitchF0DetectionAlgorithmfunctions.html#gaf14e802be136f18ab414dccd01d0fb43">smooth_portion</a> (<a class="el" href="classEST__Track.html">EST_Track</a> &amp;c, <a class="el" href="classEST__Option.html">EST_Option</a> &amp;op)</td></tr>
<tr class="separator:gaf14e802be136f18ab414dccd01d0fb43"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>These functions are used to produce a track of fundamental frequency (F0) against time of a waveform. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga09d90eaccdf4ea1688ec173852bd94c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pda </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classEST__Wave.html">EST_Wave</a> &amp;&#160;</td>
          <td class="paramname"><em>sig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEST__Track.html">EST_Track</a> &amp;&#160;</td>
          <td class="paramname"><em>fz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEST__Features.html">EST_Features</a> &amp;&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEST__String.html">EST_String</a>&#160;</td>
          <td class="paramname"><em>method</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Top level pitch (F0) detection algorithm. Returns a track containing evenly spaced frames of speech, each containing a F0 value for that point.</p>
<p>At present, only the <a class="el" href="group__PitchF0DetectionAlgorithmfunctions.html#ga66c4c8c7d43c2d9c822dbacf8eb957b0">srpd</a> pitch tracker is implemented, so this is always called regardless of what <code>method</code> is set to.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sig</td><td>input waveform </td></tr>
    <tr><td class="paramname">fz</td><td>output f0 contour </td></tr>
    <tr><td class="paramname">op</td><td>parameters for pitch tracker </td></tr>
    <tr><td class="paramname">method</td><td>pda method to be used. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pda_8cc_source.html#l00051">51</a> of file <a class="el" href="pda_8cc_source.html">pda.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ga9dbade8d205070c12e0a9c0c719b7af0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void icda </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classEST__Wave.html">EST_Wave</a> &amp;&#160;</td>
          <td class="paramname"><em>sig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEST__Track.html">EST_Track</a> &amp;&#160;</td>
          <td class="paramname"><em>fz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEST__Track.html">EST_Track</a> &amp;&#160;</td>
          <td class="paramname"><em>speech</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEST__Option.html">EST_Option</a> &amp;&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEST__String.html">EST_String</a>&#160;</td>
          <td class="paramname"><em>method</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Top level intonation contour detection algorithm. Returns a track containing evenly spaced frames of speech, each containing a F0 for that point. <code>icda</code> differs from <a class="el" href="group__PitchF0DetectionAlgorithmfunctions.html#ga09d90eaccdf4ea1688ec173852bd94c0">pda</a> in that the contour is smoothed, and unvoiced portions have interpolated F0 values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sig</td><td>input waveform </td></tr>
    <tr><td class="paramname">fz</td><td>output f0 contour </td></tr>
    <tr><td class="paramname">speech</td><td>{Interpolation is controlled by the <code>speech</code> track. When a point has a positive value in the speech track, it is a candidate for interpolation. } </td></tr>
    <tr><td class="paramname">op</td><td>parameters for pitch tracker </td></tr>
    <tr><td class="paramname">method</td><td>pda method to be used. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga70878a81305fc83535cd9723bcf0d4df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void default_pda_options </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classEST__Features.html">EST_Features</a> &amp;&#160;</td>
          <td class="paramname"><em>al</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a set sensible defaults for use in pda and icda. </p>

<p>Definition at line <a class="el" href="pda_8cc_source.html#l00229">229</a> of file <a class="el" href="pda_8cc_source.html">pda.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ga66c4c8c7d43c2d9c822dbacf8eb957b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void srpd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classEST__Wave.html">EST_Wave</a> &amp;&#160;</td>
          <td class="paramname"><em>sig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEST__Track.html">EST_Track</a> &amp;&#160;</td>
          <td class="paramname"><em>fz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEST__Features.html">EST_Features</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Super resolution pitch tracker.</p>
<p>srpd is a pitch detection algorithm that produces a fundamental frequency contour from a speech waveform. At present only the super resolution pitch determination algorithm is implemented. See (Medan, Yair, and Chazan, 1991) and (Bagshaw et al., 1993) for a detailed description of the algorithm.</p>
<p>Frames of data are read in from <code>sig</code> in chronological order such that each frame is shifted in time from its predecessor by <code>pda_frame_shift</code>. Each frame is analysed in turn.</p>
<p>The maximum and minimum signal amplitudes are initially found over the duration of two segments, each of length N_min samples. If the sum of their absolute values is below two times noise_floor, the frame is classified as representing silence and no coefficients are calculated. Otherwise, a cross correlation coefficient is calculated for all n from a period in samples corresponding to <code>min_pitch</code> to a period in samples corresponding to <code>max_pitch</code>, in steps of <code>decimation_factor</code>. In calculating the coefficient only one in <code>decimation_factor</code> samples of the two segments are used. Such down-sampling permits rapid estimates of the coefficients to be calculated over the range N_min &lt;= n &lt;= N_max. This results in a cross-correlation track for the frame being analysed.</p>
<p>Local maxima of the track with a coefficient value above a specified threshold form candidates for the fundamental period. The threshold is adaptive and dependent upon the values <code>v2uv_coeff_thresh</code>, <code>min_v2uv_coef_thresh</code>, and <code>v2uv_coef_thresh_rati_ratio</code>. If the previously analysed frame was classified as unvoiced or silent (which is the initial state) then the threshold is set to <code>v2uv_coef_thresh</code>. Otherwise, the previous frame was classified as being voiced, and the threshold is set equal to [-r] <code>v2uv_coef_thresh_rati_ratio</code> times the cross-correlation coefficient value at the point of the previous fundamental period in the former coefficients track. This product is not permitted to drop below <code>v2uv_coef_thresh</code>.</p>
<p>If no candidates for the fundamental period are found, the frame is classified as being unvoiced. Otherwise, the candidates are further processed to identify the most likely true pitch period. During this additional processing, a threshold given by <code>anti_doubling_thres</code> is used.</p>
<p>If the <code>peak_tracking</code> flag is set to true, biasing is applied to the cross-correlation track as described in (Bagshaw et al., 1993).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sig</td><td>input waveform </td></tr>
    <tr><td class="paramname">op</td><td>options regarding pitch tracking parameters </td></tr>
    <tr><td class="paramname">op.min_pitch</td><td>minimum permitted F0 value </td></tr>
    <tr><td class="paramname">op.max_pitch</td><td>maximum permitted F0 value </td></tr>
    <tr><td class="paramname">op.pda_frame_shift</td><td>analysis frame shift </td></tr>
    <tr><td class="paramname">op.pda_frame_length</td><td>analysis frame length </td></tr>
    <tr><td class="paramname">op.lpf_cutoff</td><td>cut off frequency for low pass filtering </td></tr>
    <tr><td class="paramname">op.lpf_order</td><td>order of low pass filtering (must be odd) </td></tr>
    <tr><td class="paramname">op.decimation</td><td></td></tr>
    <tr><td class="paramname">op.noise_floor</td><td></td></tr>
    <tr><td class="paramname">op.min_v2uv_coef_thresh</td><td></td></tr>
    <tr><td class="paramname">op.v2uv_coef_thresh_ratio</td><td></td></tr>
    <tr><td class="paramname">op.v2uv_coef_thresh</td><td></td></tr>
    <tr><td class="paramname">op.anti_doubling_thresh</td><td></td></tr>
    <tr><td class="paramname">op.peak_tracking</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pda_8cc_source.html#l00085">85</a> of file <a class="el" href="pda_8cc_source.html">pda.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ga6d5b37b148ee88d35322a56fe7d3b27a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void smooth_phrase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classEST__Track.html">EST_Track</a> &amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEST__Track.html">EST_Track</a> &amp;&#160;</td>
          <td class="paramname"><em>speech</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEST__Features.html">EST_Features</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEST__Track.html">EST_Track</a> &amp;&#160;</td>
          <td class="paramname"><em>sm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Smooth selected parts of an f0 contour. Interpolation is controlled by the <code>speech</code> track. When a point has a positive value in the speech track, it is a candidate for interpolation. </p>

<p>Definition at line <a class="el" href="smooth__pda_8cc_source.html#l00054">54</a> of file <a class="el" href="smooth__pda_8cc_source.html">smooth_pda.cc</a>.</p>

</div>
</div>
<a class="anchor" id="gaf14e802be136f18ab414dccd01d0fb43"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void smooth_portion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classEST__Track.html">EST_Track</a> &amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEST__Option.html">EST_Option</a> &amp;&#160;</td>
          <td class="paramname"><em>op</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Smooth all the points in an F0 contour </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Oct 6 2017 18:25:31 for Edinburgh Speech Tools by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
