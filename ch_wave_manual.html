<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Edinburgh Speech Tools: ch_wave</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="est.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Edinburgh Speech Tools
   &#160;<span id="projectnumber">2.1-release</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ch_wave_manual.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ch_wave </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#merge_waves">Making multiple waves into a single wave</a></li>
<li class="level1"><a href="#extract_channel">Extracting channels from multi-channel waves</a></li>
<li class="level1"><a href="#extract_region">Extracting of a single region from a waveform</a></li>
<li class="level1"><a href="#extract_multiple_regions">Extracting of a multiple regions from a waveform</a></li>
<li class="level1"><a href="#add_headers">Adding headers and format conversion</a></li>
</ul>
</div>
<div class="textblock"><p><em>Audio file manipulation</em></p>
<h1><a class="anchor" id="synopsis"></a>
Synopsis</h1>
<p>ch_wave is used to manipulate the format of a waveform file. Operations include:</p>
<ul>
<li>file format conversion</li>
<li>resampling (changing the sampling frequency)</li>
<li>byte-swapping</li>
<li>making multiple input files into a single multi-channel output file</li>
<li>making multiple input files into a single single-channel output file</li>
<li>extracting a single channel from a multi-channel waveform</li>
<li>scaling the amplitude of the waveform</li>
<li>low pass and high pass filtering</li>
<li>extracting a time-delimited portion of the waveform</li>
</ul>
<p>ch_wave is a executable program that serves as a wrap-around for the <a class="el" href="classEST__Wave.html" title="A class for storing digital waveforms. The waveform is stored as an array of 16 bit shorts...">EST_Wave</a> class and the basic wave manipulation functions. More advanced waveform processing is performed by the signal processing library.</p>
<h1><a class="anchor" id="options"></a>
Options</h1>
<h1><a class="anchor" id="merge_waves"></a>
Making multiple waves into a single wave</h1>
<p>If multiple input files are specified, by default they are concatenated into the output file. </p><pre class="fragment">$ ch_wave kdt_010.wav kdt_011.wav kdt_012.wav kdt_013.wav -o out.wav
</pre><p>In the above example, 4 single channel input files are converted to one single channel output file. Multi-channel waveforms can also be concatenated provided they all have the same number of input channels.</p>
<p>Multiple input files can be made into a multi-channel output file by using the -pc option:</p>
<pre class="fragment">$ ch_wave kdt_010.wav kdt_011.wav kdt_012.wav kdt_013.wav -o -pc LONGEST out.wav
</pre><p>The argument to -pc can either be LONGEST, in which the output waveform is the length of the longest input file, or FIRST in which it is the length of the first input file.</p>
<h1><a class="anchor" id="extract_channel"></a>
Extracting channels from multi-channel waves</h1>
<p>The <code>-c</code> option is used to specify channels which should be extracted from the input. If the input is a 4 channel wave, </p><pre class="fragment">$ ch_wave kdt_m.wav -o a.wav -c "0 2"
</pre><p>will extract the 0th and 2nd channel (counting starts from 0). The argument to <code>-c</code> can be either a single number of a list of numbers (wrapped in quotes)</p>
<h1><a class="anchor" id="extract_region"></a>
Extracting of a single region from a waveform</h1>
<p>There are several ways of extracting a region of a waveform. The simplest way is by using the start, end, to and from commands to delimit a sub portion of the input wave. For example,</p>
<pre class="fragment">$ ch_wave kdt_010.wav -o small.wav -start 1.45 -end 1.768
</pre><p>extracts a subwave starting at 1.45 seconds and extending to 1.768 seconds.</p>
<p>Alternatively, </p><pre class="fragment">$ ch_wave kd_010.wav -o small.wav -from 5000 -to 10000
</pre><p>extracts a subwave starting at 5000 samples and extending to 10000 samples. Times and samples can be mixed in sub-wave extraction. The output waveform will have the same number of channels as the input waveform.</p>
<h1><a class="anchor" id="extract_multiple_regions"></a>
Extracting of a multiple regions from a waveform</h1>
<p>Multiple regions can be extracted from a waveform, but as it would be too complicated to specify the start and end points on the command line, a label file with start and end points, and file names is used.</p>
<p>The file is called a key label file and in xwaves label format looks like:</p>
<pre class="fragment">separator ;
#
0.308272  121 sil ;     file kdt_010.01 ;
0.440021  121 are ;     file kdt_010.02 ;
0.512930  121 your ;    file kdt_010.03 ;
0.784097  121 grades ;  file kdt_010.04 ;
1.140969  121 higher ;  file kdt_010.05 ;
1.258647  121 or ;      file kdt_010.06 ;
1.577145  121 lower ;   file kdt_010.07 ;
1.725516  121 than ;    file kdt_010.08 ;
2.315186  121 nancy's ; file kdt_010.09 ;
</pre><p>Each line represents one region. The first column is the end time of that region and the start time of the next. The next two columns are colour and an arbitrary name, and the filename in which the output waveform is to be stored is kept as a field called file in the last column. In this example, each region corresponds to a single word in the file.</p>
<p>If the above file is called "kdt_010.words.keylab", the command: </p><pre class="fragment">$ ch_wave kdt_010.wav -key kdt_010.words -ext .wav -divide
</pre><p>will divide the input waveform into 9 output waveforms called kdt_010.01.wav, kdt_010.02.wav ... kdt_010.09.wav. The <code>-ext</code> option specifies the extension of the new waveforms, and the <code>-divide</code> command specifies that division of the entire waveform is to take place.</p>
<p>If only a single file is required the <code>-extract</code> option can be used, in which case its argument is the filename required.</p>
<pre class="fragment">$ ch_wave kdt_010.wav -key kdt_010.words -ext .wav -extract kdt_010.03 \
      -o kdt_010.03.wav
</pre><p>Note that an output filename should be specified with this option.</p>
<h1><a class="anchor" id="add_headers"></a>
Adding headers and format conversion</h1>
<p>It is usually a good idea for all waveform files to have headers as this way different byte orders, sampling rates etc can be handled safely. ch_wave provides a means of adding headers to raw files.</p>
<p>The following adds a header to a file of 16 bit shorts </p><pre class="fragment">$ ch_wave kdt_010.raw1 -o kdt_010.h1.wav -otype nist -f 16000 -itype raw
</pre><p>The following downsamples the input to 8 KHz </p><pre class="fragment">$ ch_wave kdt_010.raw1 -o kdt_010.h2.wav -otype nist -f 16000  \
          -F 8000 -itype raw
</pre><p>The following takes a 8K ulaw input file and produces a 16bit, 20Khz output file: </p><pre class="fragment">$ ch_wave kdt_010.raw2 -o kdt_010.h3.wav -otype nist -istype ulaw \
              -f 8000 -F 20000 -itype raw</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Oct 6 2017 18:25:31 for Edinburgh Speech Tools by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
