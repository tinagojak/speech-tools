<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Edinburgh Speech Tools: EST_KVL Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="est.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Edinburgh Speech Tools
   &#160;<span id="projectnumber">2.1-release</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('EST_KVL-example.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">EST_KVL Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#KVL_Addition">Adding items to a KVL</a></li>
<li class="level1"><a href="#KVL_Access">Accessing EST_KVL</a></li>
<li class="level1"><a href="#EST_Option">EST_Option</a></li>
</ul>
</div>
<div class="textblock"><p>Example of Key-Value list</p>
<h1><a class="anchor" id="KVL_Addition"></a>
Adding items to a KVL</h1>
<p>EST_KVL::add_item simply appends key value pairs onto the end of the list. This function is useful for the initial building of a list.</p>
<p><div class="fragment"><div class="line">    <span class="comment">//@ code</span></div><div class="line">      kvl.add_item(<span class="stringliteral">&quot;street&quot;</span>, <span class="stringliteral">&quot;South Bbridge&quot;</span>);</div><div class="line">      kvl.add_item(<span class="stringliteral">&quot;city&quot;</span>, <span class="stringliteral">&quot;Edinburgh&quot;</span>);</div><div class="line">      kvl.add_item(<span class="stringliteral">&quot;post code&quot;</span>, <span class="stringliteral">&quot;EH1 1HN&quot;</span>);</div><div class="line">      kvl.add_item(<span class="stringliteral">&quot;country&quot;</span>, <span class="stringliteral">&quot;United Kingdom&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">//@ endcode</span></div></div><!-- fragment --></p>
<p>By default, if a new entry has the same key name as an existing key, it will not overwrite this, leaving 2 items with the same key. The first will be the one accessed. You can overwrite existing keys by adding a flag to this function. Note that this is much slower as all the existing keys must be checked.</p>
<p><div class="fragment"><div class="line">    <span class="comment">//@ code</span></div><div class="line"></div><div class="line">      kvl.add_item(<span class="stringliteral">&quot;country&quot;</span>, <span class="stringliteral">&quot;Scotland&quot;</span>, 1);</div><div class="line">      </div><div class="line">    <span class="comment">//@ endcode</span></div></div><!-- fragment --></p>
<p>This is equivalent to the EST_KVL::change_item function, which is used to overwrite existing entries:</p>
<p><div class="fragment"><div class="line">    <span class="comment">//@ code</span></div><div class="line"></div><div class="line">      kvl.change_val(<span class="stringliteral">&quot;country&quot;</span>, <span class="stringliteral">&quot;Caledonia&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">//@ endcode</span></div></div><!-- fragment --></p>
<h1><a class="anchor" id="KVL_Access"></a>
Accessing EST_KVL</h1>
<p>The usual way to access the list is to pass in the name of the key to the <a class="el" href="classEST__TKVL.html#a25991a283aebf6751322256e5c4a8c3c" title="return value according to key (const) ">EST_StrStr_KVL::val</a> function, which then returns the value associated with that key. <div class="fragment"><div class="line">    <span class="comment">//@ code</span></div><div class="line">    </div><div class="line">    cout &lt;&lt; kvl.val(<span class="stringliteral">&quot;country&quot;</span>) &lt;&lt; endl;</div><div class="line">    <span class="comment">//@ endcode</span></div></div><!-- fragment --></p>
<p>Items are accessed by the val function, indexed by the key: This prints the value associated with the key "country". <div class="fragment"><div class="line">    <span class="comment">//@ code</span></div><div class="line">    cout &lt;&lt; kvl.val(<span class="stringliteral">&quot;state&quot;</span>) &lt;&lt; endl;</div><div class="line">    <span class="comment">//@ endcode</span></div></div><!-- fragment --></p>
<p>An error is given if the key doesn't exist: <div class="fragment"><div class="line">    <span class="comment">//@ code</span></div><div class="line">    cout &lt;&lt; kvl.val(<span class="stringliteral">&quot;state&quot;</span>, 0) &lt;&lt; endl;</div><div class="line">    <span class="comment">//@ endcode</span></div></div><!-- fragment --></p>
<p>This can be turned off by use of a flag. In this case the default value is returned.</p>
<p><div class="fragment"><div class="line">    <span class="comment">//@ code</span></div><div class="line">    cout &lt;&lt; kvl.val_def(<span class="stringliteral">&quot;state&quot;</span>, <span class="stringliteral">&quot;unknown&quot;</span>) &lt;&lt; endl;</div><div class="line">    <span class="comment">//@ endcode</span></div></div><!-- fragment --></p>
<p>A on-the fly default value can be specified by putting using the EST_KVL::val_def function:</p>
<p><div class="fragment"><div class="line">    <span class="comment">//@ code</span></div><div class="line">    <span class="keywordflow">if</span> (kvl.present(<span class="stringliteral">&quot;state&quot;</span>))</div><div class="line">        cout &lt;&lt; kvl.val(<span class="stringliteral">&quot;state&quot;</span>) &lt;&lt; endl;;</div><div class="line">    <span class="comment">//@ endcode</span></div></div><!-- fragment --></p>
<p><a class="el" href="classEST__TKVL.html#a385672b733128327b7a28944f155e77a" title="Returns true if key is present. ">EST_TKVL::present()</a> returns true of the key exists.</p>
<p>Normally, direct access to the list is not needed, but for efficiency's sake, it is sometimes useful to be able to directly access items. The <code>list</code> variable contains the key/value list, from this, EST_Litem pointers can be set to items, and then used in access functions:</p>
<p><div class="fragment"><div class="line">    <span class="comment">//@ code</span></div><div class="line">    <span class="keywordflow">for</span> (p=kvl.head(); p != 0; p=p-&gt;<a class="code" href="classEST__Item.html#aa5688ff49837311d904142ef224af8de">next</a>())</div><div class="line">     cout &lt;&lt; kvl.val(p) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; kvl.key(p) &lt;&lt; endl;</div><div class="line">    <span class="comment">//@ endcode</span></div></div><!-- fragment --></p>
<p>This can also be used to change values: the following changes the value of the pair pointed to by p to "Scotland".</p>
<p><div class="fragment"><div class="line">    <span class="comment">//@ code</span></div><div class="line">    kvl.change_val(p, <span class="stringliteral">&quot;Scotland&quot;</span>);</div><div class="line">    <span class="comment">//@ endcode</span></div></div><!-- fragment --></p>
<p>The name of the key can be changed similarly:</p>
<p><div class="fragment"><div class="line">    <span class="comment">//@ code</span></div><div class="line">    kvl.change_key(p, <span class="stringliteral">&quot;Nation&quot;</span>);</div><div class="line">    <span class="comment">//@ endcode</span></div></div><!-- fragment --></p>
<h1><a class="anchor" id="EST_Option"></a>
EST_Option</h1>
<p>The <a class="el" href="classEST__Option.html">EST_Option</a> class is a high level version of the <a class="el" href="classEST__TKVL.html" title="Templated Key-Value list. Objects of type EST_TKVL contain lists which are accessed by a key of type ...">EST_TKVL</a> class with strings for both keys and values. It is often used for lists of options, especially command line arguments.</p>
<p>Load in options from file. The file is in the form of one key value pair per line. The key ends at the end of the first whitespace delimited token, which allows the values to have spaces. Eg. </p><pre class="fragment">Country  Scotland
Street South Bridge
Number 80
Height 23.45
</pre><p>Load in file: <div class="fragment"><div class="line">    <span class="comment">//@ code</span></div><div class="line">    op.load(DATA <span class="stringliteral">&quot;/options.file&quot;</span>);</div><div class="line">    <span class="comment">//@ endcode</span></div></div><!-- fragment --></p>
<p>All the normal EST_KVL accessing and addition functions work. Although the type of the value is a String, functions are provided to allow easy casting to ints and floats.</p>
<p><div class="fragment"><div class="line">    <span class="comment">//@ code</span></div><div class="line">    cout &lt;&lt; op.val(<span class="stringliteral">&quot;Street&quot;</span>) &lt;&lt; endl;</div><div class="line">    <span class="comment">//@ endcode</span></div></div><!-- fragment --></p>
<p>Print out number as an integer:</p>
<p><div class="fragment"><div class="line">    <span class="comment">//@ code</span></div><div class="line">    cout &lt;&lt; op.ival(<span class="stringliteral">&quot;Number&quot;</span>) &lt;&lt; endl;</div><div class="line">    <span class="comment">//@ endcode</span></div></div><!-- fragment --></p>
<p>Print out height as a float: <div class="fragment"><div class="line">    <span class="comment">//@ code</span></div><div class="line">    cout &lt;&lt; op.fval(<span class="stringliteral">&quot;Height&quot;</span>) &lt;&lt; endl;</div><div class="line">    <span class="comment">//@ endcode</span></div></div><!-- fragment --></p>
<p>Often, one wishes to override an existing value if a new value has been set. The override_val function is useful for this. In the following example, the command line argument is held in the <code>al</code> object. A default value is put in the length field. If the command line option is present, it overrides "length", otherwise "length" is left unchanged:</p>
<p><div class="fragment"><div class="line">    <span class="comment">//@ code</span></div><div class="line">    op.add_fitem(<span class="stringliteral">&quot;length&quot;</span>, 39.78);</div><div class="line">    op.override_fval(<span class="stringliteral">&quot;length&quot;</span>, al.fval(<span class="stringliteral">&quot;-l&quot;</span>, 0));</div><div class="line">    <span class="comment">//@ endcode</span></div></div><!-- fragment --></p>
<p>This is quicker than the alternative:</p>
<p><div class="fragment"><div class="line">    <span class="comment">//@ code</span></div><div class="line">    op.add_fitem(<span class="stringliteral">&quot;length&quot;</span>, 39.78);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (al.present(<span class="stringliteral">&quot;-l&quot;</span>))</div><div class="line">    op.override_fval(<span class="stringliteral">&quot;length&quot;</span>, al.fval(<span class="stringliteral">&quot;-l&quot;</span>, 0));</div><div class="line"></div><div class="line">    <span class="comment">//@ endcode</span></div></div><!-- fragment --> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Oct 6 2017 18:25:31 for Edinburgh Speech Tools by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
